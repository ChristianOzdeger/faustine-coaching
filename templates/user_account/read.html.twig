{% extends 'base.html.twig' %}

{% block title %}Mon compte{% endblock %}

{% block body %}

<!-- Fil d'ariane -->
	<div class="fil_ariane">
		<div class="fil-container">
			<h2>Mon Compte</h2>
            <p class="text-center">
            	<a href="{{ path('accueil') }}">Accueil</a>&nbsp;
            	<i class="fa fa-long-arrow-right"></i>&nbsp;
            	<span>Mon compte</span>
            </p>
		</div>
	</div>
	<!-- Fil d'ariane -->

	<!-- Servives Section -->
	<div class="serv-page">
	<div class="text-center"><h3>Bienvenue {{ utilisateur.prenom ~ " " ~ utilisateur.nom|upper }}</h3></div>
		<div class="service-tab">
			<nav class="nav nav-tabs justify-content-center">
				<a class="nav-item nav-link active" data-toggle="tab" href="#contenu1">Suivi perso</a>
				<a class="nav-item nav-link" data-toggle="tab" href="#contenu2">Mes documents</a>
				<a class="nav-item nav-link" data-toggle="tab" href="#contenu3">Mes informations</a>
			</nav>
			<div class="tab-content">

				<div class="tab-pane active" id="contenu1">
					<div class="row">
						{% if mesures is empty %}
							<div class="row alert alert-info mb-4 text-center" role="alert">
								<p class="mb-0">Aucune mesure n'a été entrée dans votre suivi à ce jour</p>
							</div>
						{% else %}
							<table class="table table-striped displayOnOther">
								<thead>
									<tr class="row">
										<th class="col-lg-2">Date</th>              
										<th class="col-lg-1">Bras (en cm)</th>
										<th class="col-lg-1">Buste (en cm)</th>
										<th class="col-lg-1">Ventre (en cm)</th>
										<th class="col-lg-1">Hanches (en cm)</th>
										<th class="col-lg-1">Cuisses (en cm)</th>     
										<th class="col-lg-1">Poids (en kg)</th>
										<th class="col-lg-4"></th>
									</tr>
								</thead>
								<tbody>
									{% for mesure in mesures %}
										<tr class="row">
											<td class="col-lg-2">{{ mesure.date|date("d/m/Y") }}</td>
											<td class="col-lg-1">{{ mesure.bras }}</td>
											<td class="col-lg-1">{{ mesure.buste }}</td>
											<td class="col-lg-1">{{ mesure.ventre }}</td>
											<td class="col-lg-1">{{ mesure.hanches }}</td>
											<td class="col-lg-1">{{ mesure.cuisses }}</td>
											<td class="col-lg-1">{{ mesure.poids }}</td>
											<td class="col-lg-4 text-right">
												<a href="{{ path('measured_edit', {id: mesure.id}) }}" class="btn btn-sm btn-warning">
													<i class="fa fa-pencil-square-o" aria-hidden="true"></i>
												</a> 
												<a href="{{ path('measured_delete', {id: mesure.id}) }}" class="btn btn-sm btn-danger">
													<i class="fa fa-trash-o" aria-hidden="true"></i>
												</a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
							<table class="table table-striped displayOnSmallDevice">
								{% for mesure in mesures %}            
									<thead>
										<tr class="row">
											<th class="col-6 fontSizeLarge">{{ mesure.date|date("d/m/Y") }}</th>
											<td class="col-6">
												<a href="{{ path('measured_edit', {id: mesure.id}) }}" class="btn btn-sm btn-warning">
													<i class="fa fa-pencil-square-o" aria-hidden="true"></i>
												</a> 
												<a href="{{ path('measured_delete', {id: mesure.id}) }}" class="btn btn-sm btn-danger">
													<i class="fa fa-trash-o" aria-hidden="true"></i>
												</a>
											</td>
										</tr>
									</thead>
									<tbody>
										<tr class="row">
											<th class="col">Poids (en kg)</th>
											<td class="col">{{ mesure.poids }}</td>
										</tr>
										<tr class="row">
											<th class="col">Bras (en cm)</th>
											<td class="col">{{ mesure.bras }}</td>
										</tr>
										<tr class="row">
											<th class="col">Buste (en cm)</th>
											<td class="col">{{ mesure.buste }}</td>
										</tr>
										<tr class="row">
											<th class="col">Ventre (en cm)</th>
											<td class="col">{{ mesure.ventre }}</td>
										</tr>
										<tr class="row">
											<th class="col">Hanches (en cm)</th>
											<td class="col">{{ mesure.hanches }}</td>
										</tr>
										<tr class="row">
											<th class="col">Cuisses (en cm)</th>
											<td class="col">{{ mesure.cuisses }}</td>
										</tr>
									</tbody>
								{% endfor %}
							</table>
						{% endif %}
					</div>
					<div class="row mt-3">
						<a href="{{ path('measured_add') }}" class="btn btn-primary ml-4">Ajouter des mesures</a>
					</div>
				</div>

				<div class="tab-pane" id="contenu2">
					<div class="row">
						{% if documents is empty %}
							<div class="row alert alert-info mb-4 text-center" role="alert">
								<p class="mb-0">Vous retrouverez ici vos documents mis à disposition</p>
							</div>
							{% else %}
							<table class="table table-striped">
								<thead>
									<tr class="row">
									<th class="col-4 col-lg-2">Date</th>
									<th class="col-4 col-lg-4">Documents</th>
									<th class="col-4 col-lg-6"></th>
									</tr>
								</thead>
								<tbody>
									<tr class="row">							
										{% for document in documents %}
											<td class="col-4 col-lg-2">{{ document.createdAt|date('d/m/Y') }}</td>
											<td class="col-4 col-lg-4">{{ document.titre }}</td>
											<td class="col-4 col-lg-6">
												<a href="{{ asset('uploads/documents/' ~  document.documentName) }}">
													<i class="fa fa-download"></i>
												</a>
											</td>
										{% endfor %}
									</tr>
								</tbody>
							</table>
						{% endif %}
					</div>
				</div>
				<div class="tab-pane" id="contenu3">
					<div class="row">
						<table class="table table-striped">
							<tr class="row">
								<td class="col-3">Nom : </td>
								<td class="col-9">{{ utilisateur.getNom()}}</td>
							</tr>
							<tr class="row">
								<td class="col-3">Prénom :</td>
								<td class="col-9">{{ utilisateur.getPrenom()}}</td>
							</tr>
							<tr class="row">
								<td class="col-3">Email :</td>
								<td class="col-9">{{ utilisateur.getEmail()}}</td>
							</tr>
							<tr class="row">
								<td class="col-3">Tel :</td>
								<td class="col-9">{{ utilisateur.getTelephone()}}</td>
							</tr>
							<tr class="row">
								<td class="col-3">Inscrit le :</td>
								<td class="col-9">{{ utilisateur.getCreatedAt()|date("d/m/Y")}}</td>
							</tr>
							<tr class="row">
								<td class="col-3">Mot de passe :</td>
								<td class="col-9">************</td>
							</tr>
						</table>
    					<div class="form-row mt-2">
    						<div class="col">
    							<a class="btn custom-btn" href="{{ path('user_account_edit')}}">Modifier</a>
    						</div>
    					</div>
					</div>
				</div>		
			</div>
		</div>
	</div>
{% endblock %}


